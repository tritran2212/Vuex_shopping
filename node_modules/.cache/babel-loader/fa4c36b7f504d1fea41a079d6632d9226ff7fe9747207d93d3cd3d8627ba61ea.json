{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapGetters, mapActions } from 'vuex';\nimport AppModal from '@/components/AppModal.vue'; // Import modal dùng chung\n\nexport default {\n  name: 'CartView',\n  components: {\n    AppModal\n  },\n  data() {\n    return {\n      // Biến để quản lý trạng thái hiển thị của popup\n      showConfirmModal: false\n    };\n  },\n  computed: {\n    // Lấy dữ liệu từ Vuex store\n    ...mapGetters('cart', ['cartItems', 'cartItemCount', 'cartTotalPrice'])\n  },\n  methods: {\n    // Lấy các hành động từ Vuex store\n    ...mapActions('cart', ['removeProductFromCart', 'checkout']),\n    // Bước 1: Mở popup xác nhận khi người dùng nhấn \"Thanh toán\"\n    openConfirmation() {\n      this.showConfirmModal = true;\n    },\n    // Bước 2a: Đóng popup khi người dùng nhấn \"Hủy\"\n    cancelCheckout() {\n      this.showConfirmModal = false;\n    },\n    // Bước 2b: Xử lý logic khi người dùng nhấn \"Xác nhận\"\n    async confirmAndCheckout() {\n      // Gọi action `checkout` để xóa giỏ hàng\n      await this.checkout();\n\n      // Đóng popup\n      this.showConfirmModal = false;\n      this.$router.push('/');\n    }\n  }\n};","map":{"version":3,"names":["mapGetters","mapActions","AppModal","name","components","data","showConfirmModal","computed","methods","openConfirmation","cancelCheckout","confirmAndCheckout","checkout","$router","push"],"sources":["src/views/CartView.vue"],"sourcesContent":["Chắc chắn rồi! Dưới đây là phiên bản hoàn chỉnh và tối ưu nhất của file CartView.vue, đã tích hợp popup xác nhận thanh toán chỉ bằng một modal duy nhất.\r\n\r\nBạn chỉ cần sao chép và dán toàn bộ code này để thay thế cho file src/views/CartView.vue hiện tại của bạn.\r\n\r\nFile src/views/CartView.vue (Hoàn chỉnh)\r\nĐoạn mã\r\n\r\n<template>\r\n  <div class=\"cart-page\">\r\n    <h1>Giỏ hàng của bạn</h1>\r\n\r\n    <div v-if=\"cartItemCount === 0\" class=\"empty-cart\">\r\n      <p>Chưa có sản phẩm nào trong giỏ hàng.</p>\r\n      <router-link to=\"/\" class=\"back-to-shop-btn\">Quay lại mua sắm</router-link>\r\n    </div>\r\n\r\n    <div v-else>\r\n      <div v-for=\"item in cartItems\" :key=\"item.id\" class=\"cart-item\">\r\n        <img :src=\"item.image\" :alt=\"item.title\" class=\"item-image\" />\r\n        <div class=\"item-details\">\r\n          <h4>{{ item.title }}</h4>\r\n          <p class=\"item-price\">Giá: ${{ item.price }}</p>\r\n          <p class=\"item-quantity\">Số lượng: {{ item.quantity }}</p>\r\n        </div>\r\n        <button @click=\"removeProductFromCart(item.id)\" class=\"remove-btn\">Xóa</button>\r\n      </div>\r\n\r\n      <div class=\"cart-summary\">\r\n        <h3>Tổng tiền: ${{ cartTotalPrice }}</h3>\r\n        <button @click=\"openConfirmation\" class=\"checkout-btn\">Thanh toán</button>\r\n      </div>\r\n    </div>\r\n\r\n    <AppModal\r\n      :show=\"showConfirmModal\"\r\n      title=\"Xác nhận thanh toán\"\r\n      @close=\"cancelCheckout\"\r\n    >\r\n      <p>Bạn có chắc chắn muốn thanh toán và hoàn tất đơn hàng này không?</p>\r\n\r\n      <template v-slot:footer>\r\n        <div class=\"confirmation-buttons\">\r\n          <button @click=\"cancelCheckout\" class=\"cancel-button\">Hủy</button>\r\n          <button @click=\"confirmAndCheckout\" class=\"confirm-button\">Xác nhận</button>\r\n        </div>\r\n      </template>\r\n    </AppModal>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex';\r\nimport AppModal from '@/components/AppModal.vue'; // Import modal dùng chung\r\n\r\nexport default {\r\n  name: 'CartView',\r\n  components: {\r\n    AppModal,\r\n  },\r\n  data() {\r\n    return {\r\n      // Biến để quản lý trạng thái hiển thị của popup\r\n      showConfirmModal: false,\r\n    };\r\n  },\r\n  computed: {\r\n    // Lấy dữ liệu từ Vuex store\r\n    ...mapGetters('cart', ['cartItems', 'cartItemCount', 'cartTotalPrice']),\r\n  },\r\n  methods: {\r\n    // Lấy các hành động từ Vuex store\r\n    ...mapActions('cart', ['removeProductFromCart', 'checkout']),\r\n\r\n    // Bước 1: Mở popup xác nhận khi người dùng nhấn \"Thanh toán\"\r\n    openConfirmation() {\r\n      this.showConfirmModal = true;\r\n    },\r\n\r\n    // Bước 2a: Đóng popup khi người dùng nhấn \"Hủy\"\r\n    cancelCheckout() {\r\n      this.showConfirmModal = false;\r\n    },\r\n\r\n    // Bước 2b: Xử lý logic khi người dùng nhấn \"Xác nhận\"\r\n    async confirmAndCheckout() {\r\n      // Gọi action `checkout` để xóa giỏ hàng\r\n      await this.checkout();\r\n\r\n      // Đóng popup\r\n      this.showConfirmModal = false;\r\n\r\n      this.$router.push('/');\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.cart-page {\r\n  max-width: 800px;\r\n  margin: 2rem auto;\r\n  padding: 1rem;\r\n}\r\n.empty-cart {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  border: 1px dashed #ccc;\r\n  border-radius: 8px;\r\n}\r\n.back-to-shop-btn {\r\n  display: inline-block;\r\n  margin-top: 1rem;\r\n  padding: 0.75rem 1.5rem;\r\n  background-color: #42b983;\r\n  color: white;\r\n  text-decoration: none;\r\n  border-radius: 5px;\r\n}\r\n.cart-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1.5rem;\r\n  padding-bottom: 1.5rem;\r\n  border-bottom: 1px solid #eee;\r\n}\r\n.item-image {\r\n  width: 100px;\r\n  height: 100px;\r\n  object-fit: contain;\r\n  margin-right: 1.5rem;\r\n}\r\n.item-details {\r\n  flex-grow: 1;\r\n}\r\n.item-details h4 {\r\n  margin: 0 0 0.5rem 0;\r\n}\r\n.remove-btn {\r\n  background: #ff4d4d;\r\n  color: white;\r\n  border: none;\r\n  padding: 0.5rem 0.75rem;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n.cart-summary {\r\n  text-align: right;\r\n  margin-top: 2rem;\r\n}\r\n.cart-summary h3 {\r\n  margin-bottom: 1rem;\r\n}\r\n.checkout-btn {\r\n  background: #007bff;\r\n  color: white;\r\n  padding: 0.75rem 2rem;\r\n  border: none;\r\n  font-size: 1.1em;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n}\r\n.confirmation-buttons {\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 10px;\r\n}\r\n.cancel-button, .confirm-button {\r\n  border: none;\r\n  padding: 10px 20px;\r\n  border-radius: 5px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n}\r\n.cancel-button {\r\n  background-color: #f1f1f1;\r\n  border: 1px solid #ddd;\r\n}\r\n.confirm-button {\r\n  background-color: #42b983;\r\n  color: white;\r\n}\r\n</style>"],"mappings":";AAmDA,SAAAA,UAAA,EAAAC,UAAA;AACA,OAAAC,QAAA;;AAEA;EACAC,IAAA;EACAC,UAAA;IACAF;EACA;EACAG,KAAA;IACA;MACA;MACAC,gBAAA;IACA;EACA;EACAC,QAAA;IACA;IACA,GAAAP,UAAA;EACA;EACAQ,OAAA;IACA;IACA,GAAAP,UAAA;IAEA;IACAQ,iBAAA;MACA,KAAAH,gBAAA;IACA;IAEA;IACAI,eAAA;MACA,KAAAJ,gBAAA;IACA;IAEA;IACA,MAAAK,mBAAA;MACA;MACA,WAAAC,QAAA;;MAEA;MACA,KAAAN,gBAAA;MAEA,KAAAO,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}